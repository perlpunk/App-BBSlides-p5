#!/usr/bin/env perl
use strict;
use warnings;
use 5.010;

use App::BBSlides;
use YAML::XS qw/ LoadFile /;
use Data::Dumper;
use Getopt::Long;

unless (@ARGV) {
    die "Usage: " . usage();
}
my ($source) = @ARGV;
GetOptions(
    "out=s" => \my $out,
    "data=s" => \my $datadir,
    "html-data=s" => \my $htmldatadir,
);
unless ($out) {
    die "Usage: " . usage();
}
my @slides = LoadFile($source);

my $bbs = App::BBSlides->new({
    slides => [@slides],
    output => $out,
    datadir => $datadir,
    htmldatadir => $htmldatadir,
    source => $source,
});

$bbs->write;

sub usage {
    return <<"EOM";
Usage: $0 slides.yaml --out output-directory [--data data-dir] [--html-data htmldatadir]
EOM
}
